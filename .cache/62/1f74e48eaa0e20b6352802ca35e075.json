{"id":"components/feeds.js","dependencies":[{"name":"/srv/atlas/atlas-web/package.json","includedInParent":true,"mtime":1589460883313},{"name":"react","loc":{"line":1,"column":61},"parent":"/srv/atlas/atlas-web/src/components/feeds.js","resolved":"/srv/atlas/atlas-web/node_modules/react/index.js"},{"name":"@fortawesome/react-fontawesome","loc":{"line":2,"column":32},"parent":"/srv/atlas/atlas-web/src/components/feeds.js","resolved":"/srv/atlas/atlas-web/node_modules/@fortawesome/react-fontawesome/index.es.js"},{"name":"@fortawesome/free-solid-svg-icons","loc":{"line":13,"column":7},"parent":"/srv/atlas/atlas-web/src/components/feeds.js","resolved":"/srv/atlas/atlas-web/node_modules/@fortawesome/free-solid-svg-icons/index.es.js"},{"name":"../context/layer-context","loc":{"line":14,"column":48},"parent":"/srv/atlas/atlas-web/src/components/feeds.js","resolved":"/srv/atlas/atlas-web/src/context/layer-context.js"},{"name":"./uploader","loc":{"line":15,"column":21},"parent":"/srv/atlas/atlas-web/src/components/feeds.js","resolved":"/srv/atlas/atlas-web/src/components/uploader.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactFontawesome = require(\"@fortawesome/react-fontawesome\");\n\nvar _freeSolidSvgIcons = require(\"@fortawesome/free-solid-svg-icons\");\n\nvar _layerContext = require(\"../context/layer-context\");\n\nvar _uploader = _interopRequireDefault(require(\"./uploader\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst Feeds = ({\n  filter\n}) => {\n  const [uploaderState, setUploaderState] = (0, _react.useState)(false);\n  const layers = (0, _layerContext.useLayerState)();\n  const [paneActive, setPaneActive] = (0, _react.useState)(true);\n  const [paneHeight, setPaneHeightState] = (0, _react.useState)();\n  const dispatch = (0, _layerContext.useLayerDispatch)();\n  const content = (0, _react.useRef)(null);\n  const filteredDatasets = layers && layers.length ? layers.filter(ds => ds.name.toLowerCase().includes(filter)) : [];\n\n  const toggleAccordion = () => {\n    setPaneActive(paneActive ? false : true);\n    setPaneHeightState(paneActive === true ? '0px' : `${content.current.scrollHeight}px`);\n  };\n\n  const toggleLayer = (layer, active) => {\n    dispatch({\n      type: 'update',\n      data: { ...layer,\n        active\n      }\n    });\n  };\n\n  (0, _react.useEffect)(() => {\n    setPaneHeightState(content.current.scrollHeight);\n  }, []);\n  return (\n    /*#__PURE__*/\n    _react.default.createElement(_react.Fragment, null, uploaderState &&\n    /*#__PURE__*/\n    _react.default.createElement(_uploader.default, {\n      setUploaderState: setUploaderState\n    }),\n    /*#__PURE__*/\n    _react.default.createElement(\"header\", null,\n    /*#__PURE__*/\n    _react.default.createElement(\"h4\", null,\n    /*#__PURE__*/\n    _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n      icon: _freeSolidSvgIcons.faNetworkWired\n    }), \"\\xA0Data Feed\"),\n    /*#__PURE__*/\n    _react.default.createElement(\"button\", {\n      className: `paneToggle ${!paneActive ? 'closed' : 'open'}`,\n      onClick: toggleAccordion\n    },\n    /*#__PURE__*/\n    _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n      icon: _freeSolidSvgIcons.faChevronDown\n    }))),\n    /*#__PURE__*/\n    _react.default.createElement(\"div\", {\n      className: `pane ${!paneActive ? 'closed' : 'open'}`,\n      ref: content,\n      style: {\n        maxHeight: `${paneHeight}`\n      }\n    },\n    /*#__PURE__*/\n    _react.default.createElement(\"div\", {\n      className: \"feedBtns\"\n    },\n    /*#__PURE__*/\n    _react.default.createElement(\"select\", null,\n    /*#__PURE__*/\n    _react.default.createElement(\"option\", null, \"Name | A - Z\"),\n    /*#__PURE__*/\n    _react.default.createElement(\"option\", null, \"Name | Z - A\"),\n    /*#__PURE__*/\n    _react.default.createElement(\"option\", null, \"Author | A - Z\"),\n    /*#__PURE__*/\n    _react.default.createElement(\"option\", null, \"Author | Z - A\"),\n    /*#__PURE__*/\n    _react.default.createElement(\"option\", null, \"Created Date\"),\n    /*#__PURE__*/\n    _react.default.createElement(\"option\", null, \"Updated Date\"),\n    /*#__PURE__*/\n    _react.default.createElement(\"option\", null, \"Mapped Feeds\")),\n    /*#__PURE__*/\n    _react.default.createElement(\"button\", {\n      className: \"uploadBtn actionBtn\",\n      type: \"button\",\n      onClick: () => setUploaderState(!uploaderState)\n    }, \"Upload\")),\n    /*#__PURE__*/\n    _react.default.createElement(\"ul\", {\n      className: \"panel-list\"\n    },\n    /*#__PURE__*/\n    _react.default.createElement(\"div\", {\n      className: \"notification shared-feed\"\n    }), filteredDatasets && filteredDatasets.map((layer, index) =>\n    /*#__PURE__*/\n    _react.default.createElement(\"li\", {\n      key: layer._id\n    },\n    /*#__PURE__*/\n    _react.default.createElement(\"span\", {\n      className: \"checkbox-wrapper wrapper\"\n    },\n    /*#__PURE__*/\n    _react.default.createElement(\"input\", {\n      type: \"checkbox\",\n      checked: layer.active,\n      onClick: e => toggleLayer(layer, e.target.checked)\n    })),\n    /*#__PURE__*/\n    _react.default.createElement(\"span\", {\n      className: \"feed-detail-wrapper wrapper\"\n    },\n    /*#__PURE__*/\n    _react.default.createElement(\"h5\", null,\n    /*#__PURE__*/\n    _react.default.createElement(\"span\", {\n      className: \"icon shared new\"\n    },\n    /*#__PURE__*/\n    _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n      icon: _freeSolidSvgIcons.faShareAlt\n    })),\n    /*#__PURE__*/\n    _react.default.createElement(\"span\", {\n      className: \"file-name\"\n    }, layer.name),\n    /*#__PURE__*/\n    _react.default.createElement(\"span\", {\n      className: \"menuIcon\"\n    },\n    /*#__PURE__*/\n    _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n      icon: _freeSolidSvgIcons.faEllipsisV\n    })),\n    /*#__PURE__*/\n    _react.default.createElement(\"div\", {\n      className: \"menu\"\n    },\n    /*#__PURE__*/\n    _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n      icon: _freeSolidSvgIcons.faEllipsisV\n    }),\n    /*#__PURE__*/\n    _react.default.createElement(\"ul\", null,\n    /*#__PURE__*/\n    _react.default.createElement(\"li\", null,\n    /*#__PURE__*/\n    _react.default.createElement(\"button\", null,\n    /*#__PURE__*/\n    _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n      icon: _freeSolidSvgIcons.faInfoCircle\n    }), \"\\xA0Info\")),\n    /*#__PURE__*/\n    _react.default.createElement(\"li\", null,\n    /*#__PURE__*/\n    _react.default.createElement(\"button\", null,\n    /*#__PURE__*/\n    _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n      icon: _freeSolidSvgIcons.faFileExport\n    }), \"\\xA0Export\")),\n    /*#__PURE__*/\n    _react.default.createElement(\"li\", null,\n    /*#__PURE__*/\n    _react.default.createElement(\"button\", null,\n    /*#__PURE__*/\n    _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n      icon: _freeSolidSvgIcons.faFileUpload\n    }), \"\\xA0Upload\")),\n    /*#__PURE__*/\n    _react.default.createElement(\"li\", null,\n    /*#__PURE__*/\n    _react.default.createElement(\"button\", null,\n    /*#__PURE__*/\n    _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n      icon: _freeSolidSvgIcons.faShareAltSquare\n    }), \"\\xA0Share\")),\n    /*#__PURE__*/\n    _react.default.createElement(\"li\", null,\n    /*#__PURE__*/\n    _react.default.createElement(\"button\", null,\n    /*#__PURE__*/\n    _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n      icon: _freeSolidSvgIcons.faTrashAlt\n    }), \"\\xA0Delete\"))))),\n    /*#__PURE__*/\n    _react.default.createElement(\"dl\", null,\n    /*#__PURE__*/\n    _react.default.createElement(\"span\", {\n      className: \"date\"\n    },\n    /*#__PURE__*/\n    _react.default.createElement(\"dt\", null, \"Created\"),\n    /*#__PURE__*/\n    _react.default.createElement(\"dd\", null, layer.created_at)),\n    /*#__PURE__*/\n    _react.default.createElement(\"span\", {\n      className: \"date\"\n    },\n    /*#__PURE__*/\n    _react.default.createElement(\"dt\", null, \"Updated\"),\n    /*#__PURE__*/\n    _react.default.createElement(\"dd\", null, layer.updated_at)),\n    /*#__PURE__*/\n    _react.default.createElement(\"span\", {\n      className: \"author\"\n    },\n    /*#__PURE__*/\n    _react.default.createElement(\"dt\", null, \"Author\"),\n    /*#__PURE__*/\n    _react.default.createElement(\"dd\", null, layer.owner.name)))))))))\n  );\n};\n\nvar _default = Feeds;\nexports.default = _default;"},"sourceMaps":null,"error":null,"hash":"5836fb084d64d4d32872c2bf8916d6a1","cacheData":{"env":{}}}